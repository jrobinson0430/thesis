{"ast":null,"code":"var _jsxFileName = \"/Users/jacob.robinson/Downloads/jacob-robinson-266328/reviewed-jacob-robinson-266328-thesis-project-main/thesis/client/src/pages/Log/Log.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport { Container } from \"react-bootstrap\";\nimport { Login, SignUp } from \"./_components\";\nimport axiosAPI from \"../../apis/axios\";\nimport Context from \"../../utilities/contextProvider/Context\";\nimport ErrorHandler from \"../ErrorHandler/ErrorHandler\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Log = () => {\n  _s();\n  const [formData, setFormData] = useState({});\n  const [validated, setValidated] = useState(false);\n  const {\n    userData,\n    dispatchUser,\n    messagingBox,\n    navigate\n  } = useContext(Context);\n  const {\n    setToastMsg\n  } = messagingBox;\n  const logBox = {\n    lookups: {\n      stateAbreviations: [\"AL\", \"AL\", \"AZ\", \"AR\", \"CA\", \"CO\", \"CT\", \"DE\", \"FL\", \"GA\", \"HI\", \"ID\", \"IL\", \"IN\", \"IA\", \"KS\", \"KY\", \"LA\", \"ME\", \"MD\", \"MA\", \"MI\", \"MN\", \"MS\", \"MO\", \"MT\", \"NE\", \"NV\", \"NH\", \"NJ\", \"NM\", \"NY\", \"NC\", \"ND\", \"OH\", \"OK\", \"OR\", \"PA\", \"RI\", \"SC\", \"SD\", \"TN\", \"TX\", \"UT\", \"VT\", \"VA\", \"WA\", \"WV\", \"WI\", \"WY\"]\n    },\n    state: {\n      formData,\n      validated,\n      navigate\n    },\n    hooks: {\n      setFormData,\n      setValidated\n    },\n    handles: {\n      handleOnChange(e) {\n        const {\n          name,\n          value\n        } = e.target;\n        const locationName = e.target.name.split(\"-\").at(1);\n        setFormData(name.includes(\"loc\") ? {\n          ...formData,\n          location: {\n            ...formData.location,\n            [locationName]: value\n          }\n        } : {\n          ...formData,\n          [name]: value\n        });\n      },\n      handleCreateAcc: async e => {\n        e.preventDefault();\n\n        // form validation\n        setValidated(true);\n        const form = e.currentTarget;\n        if (!form.checkValidity()) return;\n        try {\n          const createdUserResult = await axiosAPI.createUser(formData);\n          const createdUserData = createdUserResult.data;\n          if (createdUserData.success) {\n            const verifyUserResult = await axiosAPI.verifyLogin(formData);\n            const verifyUserData = verifyUserResult.data;\n            setToastMsg(verifyUserData.message);\n            if (verifyUserData.success) {\n              setTimeout(() => {\n                dispatchUser({\n                  type: \"overwrite\",\n                  payload: verifyUserData.user\n                });\n                navigate(\"/\");\n              }, 2400);\n              sessionStorage.setItem(\"loggedInUser\", JSON.stringify(verifyUserData.user));\n            }\n          } else {\n            // for unsuccessful messages when creating a user\n            setToastMsg(createdUserData.message);\n          }\n        } catch (error) {\n          setToastMsg(`${error.message}. Please contact us at rescue_help_desk@gmail.com if the error continues.`);\n        }\n      },\n      handleLoginAcc: async e => {\n        e.preventDefault();\n\n        // form validation\n        setValidated(true);\n        const form = e.currentTarget;\n        if (!form.checkValidity()) return;\n        try {\n          const result = await axiosAPI.verifyLogin(formData);\n          const {\n            success,\n            message,\n            user\n          } = result.data;\n          setToastMsg(message);\n          if (success) {\n            setTimeout(() => {\n              dispatchUser({\n                type: \"overwrite\",\n                payload: user\n              });\n              navigate(\"/\");\n            }, 2400);\n            sessionStorage.setItem(\"loggedInUser\", JSON.stringify(user));\n          }\n        } catch (error) {\n          setToastMsg(`${error.message}. Please contact us at rescue_help_desk@gmail.com if the error continues.`);\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/create\",\n      element: /*#__PURE__*/_jsxDEV(SignUp, {\n        logBox: logBox\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 38\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/login\",\n      element: /*#__PURE__*/_jsxDEV(Login, {\n        logBox: logBox\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 37\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/*\",\n      element: /*#__PURE__*/_jsxDEV(ErrorHandler, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n};\n_s(Log, \"laKijUHPYoNIhzd7xX6w7ni6zow=\");\n_c = Log;\nexport default Log;\n\n/*\nhandleCreateAcc: once a new account is created, FN immediately verifies the\naccount with the same data in order to generate a JWT and set it to the\nbrowsers as a cookie.\n*/\nvar _c;\n$RefreshReg$(_c, \"Log\");","map":{"version":3,"names":["React","useState","useContext","Routes","Route","Container","Login","SignUp","axiosAPI","Context","ErrorHandler","jsxDEV","_jsxDEV","Log","_s","formData","setFormData","validated","setValidated","userData","dispatchUser","messagingBox","navigate","setToastMsg","logBox","lookups","stateAbreviations","state","hooks","handles","handleOnChange","e","name","value","target","locationName","split","at","includes","location","handleCreateAcc","preventDefault","form","currentTarget","checkValidity","createdUserResult","createUser","createdUserData","data","success","verifyUserResult","verifyLogin","verifyUserData","message","setTimeout","type","payload","user","sessionStorage","setItem","JSON","stringify","error","handleLoginAcc","result","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jacob.robinson/Downloads/jacob-robinson-266328/reviewed-jacob-robinson-266328-thesis-project-main/thesis/client/src/pages/Log/Log.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport { Container } from \"react-bootstrap\";\nimport { Login, SignUp } from \"./_components\";\nimport axiosAPI from \"../../apis/axios\";\nimport Context from \"../../utilities/contextProvider/Context\";\nimport ErrorHandler from \"../ErrorHandler/ErrorHandler\";\n\nconst Log = () => {\n  const [formData, setFormData] = useState({});\n  const [validated, setValidated] = useState(false);\n  const { userData, dispatchUser, messagingBox, navigate } =\n    useContext(Context);\n  const { setToastMsg } = messagingBox;\n\n  const logBox = {\n    lookups: {\n      stateAbreviations: [\n        \"AL\",\n        \"AL\",\n        \"AZ\",\n        \"AR\",\n        \"CA\",\n        \"CO\",\n        \"CT\",\n        \"DE\",\n        \"FL\",\n        \"GA\",\n        \"HI\",\n        \"ID\",\n        \"IL\",\n        \"IN\",\n        \"IA\",\n        \"KS\",\n        \"KY\",\n        \"LA\",\n        \"ME\",\n        \"MD\",\n        \"MA\",\n        \"MI\",\n        \"MN\",\n        \"MS\",\n        \"MO\",\n        \"MT\",\n        \"NE\",\n        \"NV\",\n        \"NH\",\n        \"NJ\",\n        \"NM\",\n        \"NY\",\n        \"NC\",\n        \"ND\",\n        \"OH\",\n        \"OK\",\n        \"OR\",\n        \"PA\",\n        \"RI\",\n        \"SC\",\n        \"SD\",\n        \"TN\",\n        \"TX\",\n        \"UT\",\n        \"VT\",\n        \"VA\",\n        \"WA\",\n        \"WV\",\n        \"WI\",\n        \"WY\",\n      ],\n    },\n    state: {\n      formData,\n      validated,\n      navigate,\n    },\n    hooks: {\n      setFormData,\n      setValidated,\n    },\n    handles: {\n      handleOnChange(e) {\n        const { name, value } = e.target;\n        const locationName = e.target.name.split(\"-\").at(1);\n\n        setFormData(\n          name.includes(\"loc\")\n            ? {\n                ...formData,\n                location: {\n                  ...formData.location,\n                  [locationName]: value,\n                },\n              }\n            : { ...formData, [name]: value }\n        );\n      },\n      handleCreateAcc: async (e) => {\n        e.preventDefault();\n\n        // form validation\n        setValidated(true);\n        const form = e.currentTarget;\n        if (!form.checkValidity()) return;\n\n        try {\n          const createdUserResult = await axiosAPI.createUser(formData);\n          const createdUserData = createdUserResult.data;\n\n          if (createdUserData.success) {\n            const verifyUserResult = await axiosAPI.verifyLogin(formData);\n            const verifyUserData = verifyUserResult.data;\n            setToastMsg(verifyUserData.message);\n\n            if (verifyUserData.success) {\n              setTimeout(() => {\n                dispatchUser({\n                  type: \"overwrite\",\n                  payload: verifyUserData.user,\n                });\n                navigate(\"/\");\n              }, 2400);\n              sessionStorage.setItem(\n                \"loggedInUser\",\n                JSON.stringify(verifyUserData.user)\n              );\n            }\n          } else {\n            // for unsuccessful messages when creating a user\n            setToastMsg(createdUserData.message);\n          }\n        } catch (error) {\n          setToastMsg(\n            `${error.message}. Please contact us at rescue_help_desk@gmail.com if the error continues.`\n          );\n        }\n      },\n\n      handleLoginAcc: async (e) => {\n        e.preventDefault();\n\n        // form validation\n        setValidated(true);\n        const form = e.currentTarget;\n        if (!form.checkValidity()) return;\n\n        try {\n          const result = await axiosAPI.verifyLogin(formData);\n          const { success, message, user } = result.data;\n          setToastMsg(message);\n          if (success) {\n            setTimeout(() => {\n              dispatchUser({\n                type: \"overwrite\",\n                payload: user,\n              });\n              navigate(\"/\");\n            }, 2400);\n            sessionStorage.setItem(\"loggedInUser\", JSON.stringify(user));\n          }\n        } catch (error) {\n          setToastMsg(\n            `${error.message}. Please contact us at rescue_help_desk@gmail.com if the error continues.`\n          );\n        }\n      },\n    },\n  };\n\n  return (\n    <Routes>\n      <Route path=\"/create\" element={<SignUp logBox={logBox} />} />\n      <Route path=\"/login\" element={<Login logBox={logBox} />} />\n      <Route path=\"/*\" element={<ErrorHandler />} />\n    </Routes>\n  );\n};\n\nexport default Log;\n\n/*\nhandleCreateAcc: once a new account is created, FN immediately verifies the\naccount with the same data in order to generate a JWT and set it to the\nbrowsers as a cookie.\n*/\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}