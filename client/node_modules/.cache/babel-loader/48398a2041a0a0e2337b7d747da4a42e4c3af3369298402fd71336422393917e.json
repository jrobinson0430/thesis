{"ast":null,"code":"var _jsxFileName = \"/Users/jacob.robinson/Documents/learning_repos/projects/reviewed-jacob-robinson-266328-thesis-project-main/thesis/client/src/components/Navigation/Navigation.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport axiosAPI from '../../apis/axios';\nimport NavBar from './_components/NavBar/NavBar';\nimport Context from '../../utilities/contextProvider/Context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Navigation = () => {\n  _s();\n  const [showUserLinks, setShowUserLinks] = useState(false);\n  const [showManagerLink, setShowManagerLink] = useState(false);\n  const {\n    userData,\n    dispatchUser,\n    messagingBox,\n    navigate,\n    location\n  } = useContext(Context);\n  const {\n    setUnauthorizedMsg\n  } = messagingBox;\n  const {\n    setToastMsg\n  } = messagingBox;\n  const checkUserAuth = async () => {\n    try {\n      const result = await axiosAPI.hasUserAccess({\n        navCheck: true\n      });\n      const {\n        showNav\n      } = result.data;\n      setShowUserLinks(showNav);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const checkManagerAuth = async () => {\n    try {\n      const result = await axiosAPI.hasStoreManagerAccess({\n        navCheck: true\n      });\n      const {\n        showNav\n      } = result.data;\n      setShowManagerLink(showNav);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const navBarBox = {\n    state: {\n      showManagerLink,\n      showUserLinks\n    },\n    handles: {\n      handleLogout: async () => {\n        try {\n          const result = await axiosAPI.logout();\n          const {\n            message\n          } = result.data;\n          sessionStorage.clear();\n          dispatchUser({\n            type: 'reset'\n          });\n          navigate('/');\n        } catch (error) {\n          setToastMsg(`${error.message}. Please contact us at rescue_help_desk@gmail.com if the error continues.`);\n        }\n      }\n    }\n  };\n  useEffect(() => {\n    checkManagerAuth();\n    checkUserAuth();\n  }, [userData]);\n  return /*#__PURE__*/_jsxDEV(NavBar, {\n    navBarBox: navBarBox\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(Navigation, \"7WQPEpcYBW/WzUABTnwUY4bLyhU=\");\n_c = Navigation;\nexport default Navigation;\nvar _c;\n$RefreshReg$(_c, \"Navigation\");","map":{"version":3,"names":["React","useState","useContext","useEffect","axiosAPI","NavBar","Context","jsxDEV","_jsxDEV","Navigation","_s","showUserLinks","setShowUserLinks","showManagerLink","setShowManagerLink","userData","dispatchUser","messagingBox","navigate","location","setUnauthorizedMsg","setToastMsg","checkUserAuth","result","hasUserAccess","navCheck","showNav","data","error","console","checkManagerAuth","hasStoreManagerAccess","navBarBox","state","handles","handleLogout","logout","message","sessionStorage","clear","type","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jacob.robinson/Documents/learning_repos/projects/reviewed-jacob-robinson-266328-thesis-project-main/thesis/client/src/components/Navigation/Navigation.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport axiosAPI from '../../apis/axios';\nimport NavBar from './_components/NavBar/NavBar';\nimport Context from '../../utilities/contextProvider/Context';\n\nconst Navigation = () => {\n  const [showUserLinks, setShowUserLinks] = useState(false);\n  const [showManagerLink, setShowManagerLink] = useState(false);\n  const {\n    userData,\n    dispatchUser,\n    messagingBox,\n    navigate,\n    location,\n  } = useContext(Context);\n\n  const { setUnauthorizedMsg } = messagingBox;\n  const { setToastMsg } = messagingBox;\n\n  const checkUserAuth = async () => {\n    try {\n      const result = await axiosAPI\n        .hasUserAccess({ navCheck: true });\n\n      const { showNav } = result.data;\n      setShowUserLinks(showNav);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const checkManagerAuth = async () => {\n    try {\n      const result = await axiosAPI\n        .hasStoreManagerAccess({ navCheck: true });\n\n      const { showNav } = result.data;\n      setShowManagerLink(showNav);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const navBarBox = {\n    state: {\n      showManagerLink,\n      showUserLinks,\n    },\n    handles: {\n      handleLogout: async () => {\n        try {\n          const result = await axiosAPI.logout();\n          const { message } = result.data;\n          sessionStorage.clear();\n          dispatchUser({ type: 'reset' });\n          navigate('/');\n        } catch (error) {\n          setToastMsg(`${error.message}. Please contact us at rescue_help_desk@gmail.com if the error continues.`);\n        }\n      },\n    },\n  };\n\n  useEffect(() => {\n    checkManagerAuth();\n    checkUserAuth();\n  }, [userData]);\n\n  return (\n    <NavBar navBarBox={navBarBox} />\n  );\n};\n\nexport default Navigation;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC9D,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,MAAM,MAAM,6BAA6B;AAChD,OAAOC,OAAO,MAAM,yCAAyC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9D,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvB,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACY,eAAe,EAAEC,kBAAkB,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM;IACJc,QAAQ;IACRC,YAAY;IACZC,YAAY;IACZC,QAAQ;IACRC;EACF,CAAC,GAAGjB,UAAU,CAACI,OAAO,CAAC;EAEvB,MAAM;IAAEc;EAAmB,CAAC,GAAGH,YAAY;EAC3C,MAAM;IAAEI;EAAY,CAAC,GAAGJ,YAAY;EAEpC,MAAMK,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMnB,QAAQ,CAC1BoB,aAAa,CAAC;QAAEC,QAAQ,EAAE;MAAK,CAAC,CAAC;MAEpC,MAAM;QAAEC;MAAQ,CAAC,GAAGH,MAAM,CAACI,IAAI;MAC/Bf,gBAAgB,CAACc,OAAO,CAAC;IAC3B,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB;EACF,CAAC;EAED,MAAME,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI;MACF,MAAMP,MAAM,GAAG,MAAMnB,QAAQ,CAC1B2B,qBAAqB,CAAC;QAAEN,QAAQ,EAAE;MAAK,CAAC,CAAC;MAE5C,MAAM;QAAEC;MAAQ,CAAC,GAAGH,MAAM,CAACI,IAAI;MAC/Bb,kBAAkB,CAACY,OAAO,CAAC;IAC7B,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB;EACF,CAAC;EAED,MAAMI,SAAS,GAAG;IAChBC,KAAK,EAAE;MACLpB,eAAe;MACfF;IACF,CAAC;IACDuB,OAAO,EAAE;MACPC,YAAY,EAAE,MAAAA,CAAA,KAAY;QACxB,IAAI;UACF,MAAMZ,MAAM,GAAG,MAAMnB,QAAQ,CAACgC,MAAM,CAAC,CAAC;UACtC,MAAM;YAAEC;UAAQ,CAAC,GAAGd,MAAM,CAACI,IAAI;UAC/BW,cAAc,CAACC,KAAK,CAAC,CAAC;UACtBvB,YAAY,CAAC;YAAEwB,IAAI,EAAE;UAAQ,CAAC,CAAC;UAC/BtB,QAAQ,CAAC,GAAG,CAAC;QACf,CAAC,CAAC,OAAOU,KAAK,EAAE;UACdP,WAAW,CAAE,GAAEO,KAAK,CAACS,OAAQ,2EAA0E,CAAC;QAC1G;MACF;IACF;EACF,CAAC;EAEDlC,SAAS,CAAC,MAAM;IACd2B,gBAAgB,CAAC,CAAC;IAClBR,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACP,QAAQ,CAAC,CAAC;EAEd,oBACEP,OAAA,CAACH,MAAM;IAAC2B,SAAS,EAAEA;EAAU;IAAAS,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AAEpC,CAAC;AAAClC,EAAA,CAlEID,UAAU;AAAAoC,EAAA,GAAVpC,UAAU;AAoEhB,eAAeA,UAAU;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}